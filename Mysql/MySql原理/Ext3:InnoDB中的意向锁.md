# MySql InnoDB引擎中的意向锁的作用

&nbsp;&nbsp;&nbsp;&nbsp;在MySQL中提供有表锁,用于实现针对于表级别的访问控制,但是这种表锁的实现对于高并发环境下效果并不好.因此,INNODB引擎提供了粒度更细的行锁,缩小了锁的粒度,提高了并发环境下的效率.

&nbsp;&nbsp;&nbsp;&nbsp;虽然INNODB中引入了锁,但是其和MYSQL的表锁仍然是两个维度的锁,也就是如果要实现MYSQL的表锁和INNODB的行锁之间的互斥,是需要进行额外的判断,也就是每当MYSQL在获取表的读写锁的时候,首先需要判断有没有MYSQL的读锁和写锁,如果都没有,还需要判断是否有INNODB的行级锁,在表中数据量很大的情况下,需要遍历表中的每一行,这样的效率是很慢的.

&nbsp;&nbsp;&nbsp;&nbsp;基于上述原因,INNODB中引入了意向锁,意向锁是以表为维度的,如果一个事物想要获得行级锁,其就首先要获得该表的意向锁,INNODB中共享意向锁和排他意向锁都是可以兼容的,但是其和MYSQL中的表锁并不是完全兼容的.这样,在MYSQL想要对表进行加锁的时候,他首先需要判断有没有MYSQL表锁,如果没有,就只需要判断有没有意向锁就可以,而不必每行的判断是否有行及锁.提高了并发环境下的系统吞吐量.